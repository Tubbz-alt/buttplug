
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Architecture Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="architecture.html" />
    
    
    <link rel="prev" href="./" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./#the-buttplug-sex-toy-control-standard">
            
                    
                    The Buttplug Sex Toy Control Standard
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.1" data-path="./">
            
                <a href="./#the-need-for-a-sex-toy-control-standard">
            
                    
                    The Need for a Sex Toy Control Standard
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.2" data-path="./">
            
                <a href="./#generalized-control">
            
                    
                    Generalized Control
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.3" data-path="./">
            
                <a href="./#comparisons-to-existing-software">
            
                    
                    Comparisons to Existing Software
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.4" data-path="./">
            
                <a href="./#why-is-it-called-buttplug">
            
                    
                    Why is it called Buttplug?
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="architecture.html">
            
                <a href="architecture.html#architecture">
            
                    
                    Architecture
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="architecture.html">
            
                <a href="architecture.html#implementation-types">
            
                    
                    Implementation Types
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.1" data-path="architecture.html">
            
                <a href="architecture.html#libraries">
            
                    
                    Libraries
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2" data-path="architecture.html">
            
                <a href="architecture.html#servers">
            
                    
                    Servers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.3" data-path="architecture.html">
            
                <a href="architecture.html#applications-aka-clients">
            
                    
                    Applications (aka Clients)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="architecture.html">
            
                <a href="architecture.html#protocol">
            
                    
                    Protocol
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="architecture.html">
            
                <a href="architecture.html#stages">
            
                    
                    Stages
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.3.1" data-path="architecture.html">
            
                <a href="architecture.html#identification">
            
                    
                    Identification
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.2" data-path="architecture.html">
            
                <a href="architecture.html#enumeration">
            
                    
                    Enumeration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.3" data-path="architecture.html">
            
                <a href="architecture.html#consummation">
            
                    
                    Consummation
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="usages.html">
            
                <a href="usages.html#usage-examples">
            
                    
                    Usage Examples
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="usages.html">
            
                <a href="usages.html#library-embedded-in-a-video-game">
            
                    
                    Library Embedded in a Video Game
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="usages.html">
            
                <a href="usages.html#web-based-hardware-synced-movie-player">
            
                    
                    Web Based Hardware Synced Movie Player
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="messages.html">
            
                <a href="messages.html#messages">
            
                    
                    Messages
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1" data-path="messages.html">
            
                <a href="messages.html#basic-message-structure">
            
                    
                    Basic Message Structure
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.2" data-path="messages.html">
            
                <a href="messages.html#message-flow">
            
                    
                    Message Flow
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.3" data-path="messages.html">
            
                <a href="messages.html#a-note-on-scaling">
            
                    
                    A Note On Scaling
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.4" data-path="messages.html">
            
                <a href="messages.html#json-message-serialization">
            
                    
                    JSON Message Serialization
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.5" data-path="messages.html">
            
                <a href="messages.html#adding-new-messages">
            
                    
                    Adding New Messages
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.6" data-path="messages.html">
            
                <a href="messages.html#message-description-template">
            
                    
                    Message Description Template
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="status.html">
            
                <a href="status.html#status-messages">
            
                    
                    Status Messages
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.2.1" data-path="status.html">
            
                <a href="status.html#ok">
            
                    
                    Ok
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.2" data-path="status.html">
            
                <a href="status.html#error">
            
                    
                    Error
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.3" data-path="status.html">
            
                <a href="status.html#ping">
            
                    
                    Ping
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.4" data-path="status.html">
            
                <a href="status.html#request-log">
            
                    
                    RequestLog
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.5" data-path="status.html">
            
                <a href="status.html#log">
            
                    
                    Log
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="identification.html">
            
                <a href="identification.html#identification-messages">
            
                    
                    Identification Messages
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.3.1" data-path="identification.html">
            
                <a href="identification.html#request-server-info">
            
                    
                    RequestServerInfo
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3.2" data-path="identification.html">
            
                <a href="identification.html#server-info">
            
                    
                    ServerInfo
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="enumeration.html">
            
                <a href="enumeration.html#enumeration-messages">
            
                    
                    Enumeration Messages
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.4.1" data-path="enumeration.html">
            
                <a href="enumeration.html#start-scanning">
            
                    
                    StartScanning
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4.2" data-path="enumeration.html">
            
                <a href="enumeration.html#stop-scanning">
            
                    
                    StopScanning
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4.3" data-path="enumeration.html">
            
                <a href="enumeration.html#scanning-finished">
            
                    
                    ScanningFinished
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4.4" data-path="enumeration.html">
            
                <a href="enumeration.html#request-device-list">
            
                    
                    RequestDeviceList
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4.5" data-path="enumeration.html">
            
                <a href="enumeration.html#device-list">
            
                    
                    DeviceList
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4.6" data-path="enumeration.html">
            
                <a href="enumeration.html#device-added">
            
                    
                    DeviceAdded
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4.7" data-path="enumeration.html">
            
                <a href="enumeration.html#device-removed">
            
                    
                    DeviceRemoved
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4.8" data-path="enumeration.html">
            
                <a href="enumeration.html#stop-device">
            
                    
                    StopDevice
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4.9" data-path="enumeration.html">
            
                <a href="enumeration.html#stop-all-devices">
            
                    
                    StopAllDevices
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="generic.html">
            
                <a href="generic.html#generic-device-messages">
            
                    
                    Generic Device Messages
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.5.1" data-path="generic.html">
            
                <a href="generic.html#single-motor-vibrate-cmd">
            
                    
                    SingleMotorVibrateCmd
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5.2" data-path="generic.html">
            
                <a href="generic.html#raw-cmd">
            
                    
                    RawCmd
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.6" data-path="specific.html">
            
                <a href="specific.html#specific-device-messages">
            
                    
                    Specific Device Messages
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.6.1" data-path="specific.html">
            
                <a href="specific.html#kiiro-cmd">
            
                    
                    KiiroCmd
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.6.2" data-path="specific.html">
            
                <a href="specific.html#fleshlight-launch-f-w12cmd">
            
                    
                    FleshlightLaunchFW12Cmd
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.6.3" data-path="specific.html">
            
                <a href="specific.html#lovense-cmd">
            
                    
                    LovenseCmd
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.7" data-path="jsonschema.html">
            
                <a href="jsonschema.html#message-json-schema">
            
                    
                    Message JSON Schema
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Architecture</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="architecture">Architecture</h1>
<h2 id="implementation-types">Implementation Types</h2>
<p>The Buttplug Standard can be implemented in different ways. This section covers the terms used throughout this document.</p>
<h3 id="libraries">Libraries</h3>
<p>Implementing the standard as a library for a certain programming language allows developers to either build servers on top of the library in that language, or to integrate the library into their applications that also use that language (or FFI/bindings to that language). For instance, the C# implementation of the Buttplug Standard can be used with a WebSocket implementation on top of it to be a server that other applications can talk to. It could also be compiled into a Unity game so that the communication exists only in the executable itself.</p>
<h3 id="servers">Servers</h3>
<p>As mentioned above, servers are a thin layer on top of a library that allow other applications to access hardware managed by the server. For instance, a Web Application may not have the capability to talk to hardware by itself, but can connect with a Buttplug Server implementation via HTTP, WebSockets, or other standardized protocols. Programs like Max/MSP and Pd could communicate with a Buttplug Server implementation via OSC.</p>
<h3 id="applications-aka-clients">Applications (aka Clients)</h3>
<p>Applications, or clients, refer to programs that in some way interact with a server to perform some sort of job for the user. A few ideas for applications:</p>
<ul>
<li>A movie player that sends synchronization commands while playing an encoded video.</li>
<li>A music player that syncs sex toys with the BPM of the current track.</li>
<li>A video game that somehow involves sex toy interaction</li>
</ul>
<p>All of these would need to talk to a Buttplug server to establish which devices to use, then communicate with those devices.</p>
<h2 id="protocol">Protocol</h2>
<p>The Buttplug Standard defines a message based protocol between a client and a server. Note that the use of client and server here does not explicitly denote network connection. These terms are used as a generic way to denote different communication endpoints.</p>
<p>Client are expected to request information from the server about devices that are connected, and to send information to those devices via the server. Servers will handle device enumeration, connection management, and failure recoveries (for instance, stopping all connected devices on client disconnect).</p>
<p>While serialization formats are not yet standardized, current references implementations of the Standard use JSON for serialization. More information on this is available in the Messages section.</p>
<h2 id="stages">Stages</h2>
<p>Buttplug sessions consist of 3 stages. While these stages need not be discrete, due to the way Buttplug will likely be used, they will usually end up being so. Applications may hide or combine some of the stages depending on requirements.</p>
<h3 id="identification">Identification</h3>
<p>During the identification stage, a client will establish connection with the server, and send over its identifying information. The server may trigger some sort of UI event at this point to ask if the user will allow the client to connect and interact.</p>
<h3 id="enumeration">Enumeration</h3>
<p>After the client/server connection is set up, device enumeration can begin. The client can ask the server to scan for devices on various busses or media (serial, usb, bluetooth, network, etc), and return a list of devices it can communicate with.</p>
<h3 id="consummation">Consummation</h3>
<p>Once devices are found and selected, we can assume the user will begin interacting with connected devices. At this point, the client will mostly be sending and receiving device commands. It can usually (but not always) be assumed that continued enumeration may not be possible due to the context of situations that Buttplug software will be used in.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="./#why-is-it-called-buttplug" class="navigation navigation-prev " aria-label="Previous page: Why is it called Buttplug?">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="architecture.html#implementation-types" class="navigation navigation-next " aria-label="Next page: Implementation Types">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Architecture","level":"1.2","depth":1,"next":{"title":"Implementation Types","level":"1.2.1","depth":2,"anchor":"#implementation-types","path":"architecture.md","ref":"architecture.md#implementation-types","articles":[{"title":"Libraries","level":"1.2.1.1","depth":3,"anchor":"#libraries","path":"architecture.md","ref":"architecture.md#libraries","articles":[]},{"title":"Servers","level":"1.2.1.2","depth":3,"anchor":"#servers","path":"architecture.md","ref":"architecture.md#servers","articles":[]},{"title":"Applications (aka Clients)","level":"1.2.1.3","depth":3,"anchor":"#applications-aka-clients","path":"architecture.md","ref":"architecture.md#applications-aka-clients","articles":[]}]},"previous":{"title":"Why is it called Buttplug?","level":"1.1.4","depth":2,"anchor":"#why-is-it-called-buttplug","path":"README.md","ref":"README.md#why-is-it-called-buttplug","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"architecture.md","mtime":"2017-06-08T01:48:36.228Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-06-08T01:53:28.536Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

